<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Contactos</title>
    <link rel="stylesheet" href="agenda.css">
    <script src='vistaWeb.js'></script>
</head>
<body>
    <script src='utilesVista.js'></script>
    <div class="content">
                
            <h2> <div id="titulo"></div></h2>
           
            <form id="formBuscar" onsubmit="buscarContactos(event)">
                <div class="input-group">
                    <label for="nombre">Filtro:</label>
                    <input type="text" id="filtro" name="filtro" >
                </div>
             
                <button type="submit">Buscar</button>
            </form>
            <hr>
             <form id="formCriterio" onsubmit="cambiarCriterio(event)">
                <div class="input-group">
                    <label for="tipo">Crtiterio de busqueda:</label>
                    <span id="spnCriterios"></span>
                </div>
                <button type="submit">Cambiar</button>
            </form>
            
            <h2><div id="resumen"></div></h2>
            <div id="divListaContactos">
                <!-- Aquí se mostrarán los contactos  -->
            </div>
           
        </div>
         
        
    </div>
    <script>
        urlIniciarVista="/busqueda/vistaConectada";
        urlCierreVista="/busqueda/vistaCerrada";

        function cambiarCriterio(event) {
            event.preventDefault();
            submit("/busqueda/cambiarCriterio",serializarFormulario("formCriterio"));
        }
         function buscarContactos(event) {
            event.preventDefault();
            submit("/busqueda/buscar",serializarFormulario("formBuscar"));
        }
        
        function mostrar_resultado(resultado){
            document.getElementById("resumen").innerHTML =  resultado.cantidadContactos + " Contacto(s) encontrados";
            document.getElementById("divListaContactos").innerHTML=crearTablaDesdeJson(resultado.contactos);
        }
         function mostrar_titulo(titulo){
            document.getElementById("titulo").innerHTML =  titulo;
          
        }
        function mostrar_criterioActual(criterio){
            seleccionarPorTexto("posCriterio", criterio) 
          
        }
        function mostrar_criterios(criterios){
            document.getElementById("spnCriterios").innerHTML = crearListaDesdeJson({data:criterios,id:"posCriterio",campoMostrar: "nombre",mostrarOpcionInicial : false});
        }
        function mostrar_mensaje(mensaje){
            excepcionDeAplicacion(mensaje);
        }
        async function excepcionDeAplicacion(mensaje){
            await mostrarMensaje(mensaje);
        } 

    </script>
</body>
</html>